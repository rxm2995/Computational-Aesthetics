"use strict";!function(){function e(){h=document.querySelector("canvas"),h.width=window.innerWidth,h.height=window.innerHeight,P.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(P.domElement),P.setClearColor(4473924),T.position.z=5,document.querySelector("#widthInput").value=x,document.querySelector("#heightInput").value=E,document.querySelector("#underPopInput").onchange=function(e){p=Math.max(e.target.min,Math.min(S,e.target.value)),e.target.value=p,document.querySelector("#survivalMinInput").value=p},document.querySelector("#survivalMinInput").onchange=function(e){p=Math.max(e.target.min,Math.min(S,e.target.value)),document.querySelector("#underPopInput").value=p,e.target.value=p},document.querySelector("#overPopInput").onchange=function(e){S=Math.max(p,Math.min(e.target.max,e.target.value)),e.target.value=S,document.querySelector("#survivalMaxInput").value=S},document.querySelector("#survivalMaxInput").onchange=function(e){S=Math.max(p,Math.min(e.target.max,e.target.value)),document.querySelector("#overPopInput").value=S,e.target.value=S},document.querySelector("#reproductionInput").onchange=function(e){q=Math.max(e.target.min,Math.min(e.target.max,e.target.value)),e.target.value=q},document.querySelector("#speedInput").onchange=function(e){w=Math.max(0,e.target.value),window.clearInterval(f),f=setInterval(o,w)},document.querySelector("#pauseButton").onclick=function(e){window.clearInterval(f),f=-1,e.target.className="hidden",document.querySelector("#playButton").className="",document.querySelector("#advanceButton").className=""},document.querySelector("#playButton").onclick=function(e){f=setInterval(o,w),document.querySelector("#pauseButton").className="",e.target.className="hidden",document.querySelector("#advanceButton").className="hidden"},document.querySelector("#resetButton").onclick=function(){-1!=f&&window.clearInterval(f),w=75,I=!1,k=!1,M=!0,u(70-x,70-E),t(),document.querySelector("#raisedCheckbox").checked=!0,document.querySelector("#toroidCheckbox").checked=!0,document.querySelector("#genCheckbox").checked=!0,document.querySelector("#pauseButton").className="",document.querySelector("#playButton").className="hidden",document.querySelector("#speedInput").value=w,i(),f=setInterval(o,w)},document.querySelector("#raisedCheckbox").onchange=function(e){I=e.target.checked,c()},document.querySelector("#camTiltCheckbox").onchange=function(e){e.target.checked?(T.position.y=-5,T.position.z=1.5,T.rotation.x=Math.PI/3):(T.position.y=0,T.position.z=5,T.rotation.x=0)},document.querySelector("#toroidCheckbox").onchange=function(e){M=e.target.checked},document.querySelector("#genCheckbox").onchange=function(e){k=!e.target.checked},document.querySelector("#interfaceToggle").onclick=function(e){var t=document.querySelector("#userInterface");"-25%"==t.style.left?(t.style.left="0%",e.target.innerHTML="&lt;"):(t.style.left="-25%",e.target.innerHTML="&gt;")},document.querySelector("#optionsToggle").onclick=function(e){n(e.target,document.querySelector("#optionsSubmenu"),"Grid Settings")},document.querySelector("#rulesToggle").onclick=function(e){n(e.target,document.querySelector("#rulesSubmenu"),"Rules")},document.querySelector("#presetToggle").onclick=function(e){n(e.target,document.querySelector("#presetSubmenu"),"Presets")},document.querySelector("#regenButton").onclick=i,document.querySelector("#clearButton").onclick=a,document.querySelector("#oscPreset").onclick=l,document.querySelector("#glidePreset").onclick=d,document.querySelector("#pentaPreset").onclick=m,document.querySelector("#gospPreset").onclick=s,document.querySelector("#linePreset").onclick=v,document.querySelector("#advanceButton").onclick=o,document.querySelector("#widthInput").onchange=function(e){e.target.value=Math.max(e.target.min,e.target.value),u(e.target.value-x,0)},document.querySelector("#heightInput").onchange=function(e){e.target.value=Math.max(e.target.min,e.target.value),u(0,e.target.value-E)},window.addEventListener("resize",function(){h.width=window.innerWidth,h.height=window.innerHeight-h.getBoundingClientRect().top,T.aspect=window.innerWidth/window.innerHeight,T.updateProjectionMatrix(),P.setSize(window.innerWidth,window.innerHeight),c()},!1),y=h.getContext("2d"),g=new Array(x),R=new Array(x);for(var e=0;x>e;e++){g[e]=new Array(E),R[e]=new Array(E);for(var r=0;E>r;r++)g[e][r]=Math.round(Math.random()),R[e][r]=new THREE.Mesh(B,0==g[e][r]?b:C),R[e][r].position.x=.1*(e-x/2),R[e][r].position.y=.1*(r-E/2),H.add(R[e][r])}f=setInterval(o,w)}function t(){p=2,survivalMin=2,survivalMax=3,S=3,q=3,document.querySelector("#underPopInput").value=p,document.querySelector("#survivalMinInput").value=survivalMin,document.querySelector("#survivalMaxInput").value=survivalMax,document.querySelector("#overPopInput").value=S,document.querySelector("#reproductionInput").value=q}function n(e,t,n){"hidden"==t.className?(t.className="",e.innerHTML="<span style='font-size:80%'>&#9660;</span> "+n):(t.className="hidden",e.innerHTML="&#9654; "+n)}function o(){for(var e=new Array(x),t=0;x>t;t++)e[t]=g[t].slice();for(var n=0;x>n;n++)for(var o=0;E>o;o++){var u=0;u+=r(e,n+1,o+1),u+=r(e,n+1,o),u+=r(e,n+1,o-1),u+=r(e,n,o+1),u+=r(e,n,o-1),u+=r(e,n-1,o+1),u+=r(e,n-1,o),u+=r(e,n-1,o-1),1==g[n][o]?(p>u||u>S)&&(g[n][o]=0,R[n][o].material=b,R[n][o].position.z=0):u==q&&(g[n][o]=1,R[n][o].material=C,R[n][o].position.z=I?.1:0)}P.render(H,T)}function r(e,t,n){if(0>t){if(!M)return 0;t=x-1}else if(t>=x){if(!M)return 0;t=0}if(0>n){if(!M)return 0;n=E-1}else if(n>=E){if(!M)return 0;n=0}return e[t][n]}function u(e,t){if(0!=e||0!=t){if(e>0)for(var n=x;x+e>n;n++){g[n]=new Array(E),R[n]=new Array(E);for(var o=0;E>o;o++)g[n][o]=k?0:Math.round(Math.random()),R[n][o]=new THREE.Mesh(B,0==g[n][o]?b:C),H.add(R[n][o])}else if(0>e)for(var r=-1;r>=e;r--)for(var u=0;E>u;u++)H.remove(R[x+r][u]);if(x+=e,document.querySelector("#widthInput").value=x,t>0)for(var a=0;x>a;a++)for(var i=E;E+t>i;i++)g[a][i]=k?0:Math.round(Math.random()),R[a][i]=new THREE.Mesh(B,0==g[a][i]?b:C),H.add(R[a][i]);else if(0>t)for(var l=0;x>l;l++)for(var d=-1;d>=t;d--)H.remove(R[l][E+d]);E+=t,document.querySelector("#heightInput").value=E;for(var m=0;x>m;m++)for(var s=0;E>s;s++)R[m][s].position.x=.1*(m-x/2),R[m][s].position.y=.1*(s-E/2);c()}}function c(){for(var e=0;x>e;e++)for(var t=0;E>t;t++)0==g[e][t]?(R[e][t].material!=b&&(R[e][t].material=b),R[e][t].position.z=0):(R[e][t].material!=C&&(R[e][t].material=C),R[e][t].position.z=I?.1:0);P.render(H,T)}function a(){for(var e=0;x>e;e++)for(var t=0;E>t;t++)g[e][t]=0;c()}function i(){for(var e=0;x>e;e++)for(var t=0;E>t;t++)g[e][t]=Math.round(Math.random());c()}function l(){u(19-x,19-E),t(),a(),g[6][2]=1,g[6][3]=1,g[6][4]=1,g[7][4]=1,g[6][7]=1,g[6][8]=1,g[7][6]=1,g[7][8]=1,g[8][6]=1,g[8][7]=1,g[2][6]=1,g[3][6]=1,g[4][6]=1,g[4][7]=1,g[11][4]=1,g[12][2]=1,g[12][3]=1,g[12][4]=1,g[10][6]=1,g[10][7]=1,g[11][6]=1,g[11][8]=1,g[12][7]=1,g[12][8]=1,g[14][6]=1,g[14][7]=1,g[15][6]=1,g[16][6]=1,g[6][10]=1,g[6][11]=1,g[7][10]=1,g[7][12]=1,g[8][11]=1,g[8][12]=1,g[10][11]=1,g[10][12]=1,g[11][10]=1,g[11][12]=1,g[12][10]=1,g[12][11]=1,g[2][12]=1,g[3][12]=1,g[4][11]=1,g[4][12]=1,g[14][11]=1,g[14][12]=1,g[15][12]=1,g[16][12]=1,g[6][14]=1,g[6][15]=1,g[6][16]=1,g[7][14]=1,g[11][14]=1,g[12][14]=1,g[12][15]=1,g[12][16]=1,c()}function d(){u(30-x,30-E),t(),M=!0,document.querySelector("#toroidCheckbox").checked=M,a(),g[1][4]=1,g[1][6]=1,g[2][3]=1,g[3][3]=1,g[4][3]=1,g[4][6]=1,g[5][3]=1,g[5][4]=1,g[5][5]=1,g[17][1]=1,g[15][1]=1,g[18][2]=1,g[18][3]=1,g[18][4]=1,g[15][4]=1,g[18][5]=1,g[17][5]=1,g[16][5]=1,c()}function m(){u(11-x,18-E),t(),a(),g[5][4]=1,g[5][5]=1,g[4][6]=1,g[6][6]=1,g[5][7]=1,g[5][8]=1,g[5][9]=1,g[5][10]=1,g[4][11]=1,g[6][11]=1,g[5][12]=1,g[5][13]=1,c()}function s(){u(80-x,60-E),t(),M=!1,document.querySelector("#toroidCheckbox").checked=M,a(),g[1][5]=1,g[1][6]=1,g[2][5]=1,g[2][6]=1,g[13][3]=1,g[14][3]=1,g[12][4]=1,g[16][4]=1,g[11][5]=1,g[17][5]=1,g[11][6]=1,g[15][6]=1,g[17][6]=1,g[18][6]=1,g[11][7]=1,g[17][7]=1,g[12][8]=1,g[16][8]=1,g[13][9]=1,g[14][9]=1,g[25][1]=1,g[23][2]=1,g[25][2]=1,g[21][3]=1,g[22][3]=1,g[21][4]=1,g[22][4]=1,g[21][5]=1,g[22][5]=1,g[23][6]=1,g[25][6]=1,g[25][7]=1,g[35][3]=1,g[36][3]=1,g[35][4]=1,g[36][4]=1,c()}function v(){u(57-x,43-E),t(),M=!1,document.querySelector("#toroidCheckbox").checked=M,a(),g[8][21]=1,g[9][21]=1,g[10][21]=1,g[11][21]=1,g[12][21]=1,g[13][21]=1,g[14][21]=1,g[15][21]=1,g[17][21]=1,g[18][21]=1,g[19][21]=1,g[20][21]=1,g[21][21]=1,g[25][21]=1,g[26][21]=1,g[27][21]=1,g[34][21]=1,g[35][21]=1,g[36][21]=1,g[37][21]=1,g[38][21]=1,g[39][21]=1,g[40][21]=1,g[41][21]=1,g[43][21]=1,g[44][21]=1,g[45][21]=1,g[46][21]=1,g[47][21]=1,c()}var h=void 0,y=void 0,g=void 0,f=void 0,p=document.querySelector("#underPopInput").value,S=document.querySelector("#overPopInput").value,q=document.querySelector("#reproductionInput").value,w=document.querySelector("#speedInput").value,M=!0,k=!1,I=!0,x=70,E=70,H=new THREE.Scene,T=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),P=new THREE.WebGLRenderer,B=new THREE.BoxGeometry(.1,.1,.1),C=new THREE.MeshBasicMaterial({color:0}),b=new THREE.MeshBasicMaterial({color:16777215}),R=void 0;window.onload=e}();